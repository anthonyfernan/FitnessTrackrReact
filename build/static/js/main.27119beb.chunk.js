(this.webpackJsonpUNIV_FitnessTrackr_React_Front=this.webpackJsonpUNIV_FitnessTrackr_React_Front||[]).push([[0],{61:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(1),a=n(30),s=n.n(a),i=n(15),o=n(3),u=n(2),l=n.n(u),j=n(4),p=n(8),b=n.n(p);function d(){return JSON.parse(localStorage.getItem("currentUser"))}function h(){return JSON.parse(localStorage.getItem("token"))}var v="http://powerful-crag-58891.herokuapp.com";function O(){return x.apply(this,arguments)}function x(){return(x=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(v,"/api/routines"));case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return(m=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(v,"/api/routines/").concat(t));case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("".concat(v,"/api/activities"));case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.delete("".concat(v,"/api/routines/").concat(t),{headers:{Authorization:"Bearer "+h()}});case 3:return n=e.sent,r=n.data,e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var N=n(0),A=function(){return Object(N.jsxs)("div",{id:"main",children:[Object(N.jsx)("h4",{children:"Welcome!"}),Object(N.jsx)("h4",{children:Object(N.jsx)("a",{href:"#",onClick:handleLogout,children:"Logout"})})]})},I=n(9),S=n(7),C=function(e){var t=e.setUser,n=Object(c.useState)({username:"",password:""}),a=Object(r.a)(n,2),s=a[0],i=a[1],o=function(e){i(Object(S.a)(Object(S.a)({},s),{},Object(I.a)({},e.target.name,e.target.value)))},u=function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.a.post("".concat(v,"/api/users/register/"),{username:s.username,password:s.password});case 4:r=e.sent,console.log(r.data),t(r.data.user),alert("Registration successful, please login!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{id:"forms",children:Object(N.jsx)("form",{onSubmit:u,children:Object(N.jsxs)("div",{className:"register",children:[Object(N.jsx)("input",{placeholder:"username",name:"username",value:s.username,onInput:o}),Object(N.jsx)("input",{type:"password",placeholder:"password",name:"password",value:s.password,onInput:o}),Object(N.jsx)("button",{className:"submit",type:"submit",children:"REGISTER"})]})})})},R=function(e){var t=e.setUser,n=Object(c.useState)({username:"",password:""}),a=Object(r.a)(n,2),s=a[0],i=a[1],o=function(e){i(Object(S.a)(Object(S.a)({},s),{},Object(I.a)({},e.target.name,e.target.value)))},u=function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.a.post("".concat(v,"/api/users/login"),{username:s.username,password:s.password});case 4:r=e.sent,c=r.data.user,a=r.data.token,localStorage.setItem("currentUser",JSON.stringify(c)),localStorage.setItem("token",JSON.stringify(a)),t(r.data.user),console.log("this is res.data",r.data),alert("Login successful, welcome back!"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}var c,a}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{id:"forms",children:Object(N.jsx)("form",{onSubmit:u,children:Object(N.jsxs)("div",{className:"login",children:[Object(N.jsx)("input",{placeholder:"username",name:"username",value:s.username,onInput:o}),Object(N.jsx)("input",{type:"password",placeholder:"password",name:"password",value:s.password,onInput:o}),Object(N.jsx)("button",{className:"submit",type:"submit",children:"LOGIN"})]})})})},D=function(e){var t=e.routines,n=e.setRoutines,a=(e.setActivities,e.activities),s=d(),i=Object(c.useState)("NotActive"),o=Object(r.a)(i,2),u=o[0],p=o[1],b=Object(c.useState)("NotActive"),h=Object(r.a)(b,2),v=h[0],x=h[1],f=a,m=t,g=function(){var e=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(t.target.id);case 3:return e.next=5,O();case 5:r=e.sent,n(r),alert("You deleted your routine sucessfully!"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"routines",children:[Object(N.jsx)("h2",{children:"All Routines"}),t.map((function(e){var r=e.id,c=e.name,a=e.goal,i=e.creatorName,o=e.activities;return Object(N.jsxs)("div",{className:"routines",children:[Object(N.jsxs)("h3",{children:["Routine Name: ",c]}),Object(N.jsxs)("h4",{children:["Goal: ",a]}),Object(N.jsx)("h5",{children:"Activities:"}),o.map((function(e){var t=e.id,n=e.name,r=e.description,c=e.count,a=e.duration;return Object(N.jsxs)("div",{className:"routineActivities",children:[Object(N.jsxs)("p",{children:["Name: ",n]}),Object(N.jsxs)("p",{children:["Description: ",r]}),Object(N.jsxs)("p",{children:["Count: ",c]}),Object(N.jsxs)("p",{children:["Duration: ",a]})]},t)})),Object(N.jsxs)("p",{children:["Created by: ",i]}),s.username===i?Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{onClick:g,type:"button",id:r,children:"Delete"}),Object(N.jsx)("button",{onClick:function(){return p("Active")},type:"button",id:"editId".concat(r),children:"Edit"},"editKey".concat(r)),"Active"===u&&Object(N.jsx)(L,{routines:t,activities:o,setRoutines:n,setEditing:p,id:r,name:c,goal:a}),Object(N.jsx)("button",{onClick:function(){return x("Active")},type:"button",id:"activityId".concat(r),children:"+ Activity"},"activityKey".concat(r)),"Active"===v&&Object(N.jsx)(U,{setRoutines:n,activitiesCopy:f,routinesCopy:m,activities:o,setActivityActive:x,id:r})]})}):""]},r)}))]})},E=function(e){var t=e.activities;return Object(N.jsxs)("div",{className:"activities",children:[Object(N.jsx)("h2",{children:"All Activities"}),t.map((function(e){var t=e.id,n=e.name,r=e.description;return Object(N.jsxs)("div",{className:"activities",children:[Object(N.jsxs)("p",{children:["Name: ",n]}),Object(N.jsxs)("p",{children:["Description: ",r]})]},t)}))]})},F=function(e){var t=e.setActivities,n=Object(c.useState)({name:"",description:""}),a=Object(r.a)(n,2),s=a[0],i=a[1],o=function(){i({name:"",description:""})},u=function(e){i(Object(S.a)(Object(S.a)({},s),{},Object(I.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.a.post("".concat(v,"/api/activities"),{name:s.name,description:s.description},{headers:{Authorization:"Bearer "+h()}});case 4:return e.sent,e.next=7,g();case 7:r=e.sent,t(r),alert("Activity created, get swoll!"),o(),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(1),alert("This activity already exists!"),console.error(e.t0),o();case 18:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{id:"activityForm",children:Object(N.jsx)("form",{onSubmit:p,children:Object(N.jsxs)("div",{className:"activitiesForm",children:[Object(N.jsx)("input",{placeholder:"Name the activity",name:"name",value:s.name,onInput:u}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{placeholder:"Describe the activity",name:"description",value:s.description,onInput:u}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{className:"submit",type:"submit",children:"Create Activity"})]})})})},T=function(e){e.user;var t=e.setRoutines,n=Object(c.useState)({name:"",goal:"",isPublic:"true"}),a=Object(r.a)(n,2),s=a[0],i=a[1],o=function(){i({name:"",goal:"",isPublic:"true"})},u=function(e){i(Object(S.a)(Object(S.a)({},s),{},Object(I.a)({},e.target.name,e.target.value)))},p=function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.a.post("".concat(v,"/api/routines"),{name:s.name,goal:s.goal,isPublic:!0},{headers:{"Content-type":"application/json",Authorization:"Bearer "+h()}});case 4:return e.sent,e.next=7,O();case 7:r=e.sent,console.log("this is routineList",r),t(r),alert("Routine created, noice bro!"),o(),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(1),alert("This routine already exists!"),o(),console.error(e.t0,"Error creating a routine");case 19:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsx)("div",{id:"routineForm",children:Object(N.jsx)("form",{onSubmit:p,children:Object(N.jsxs)("div",{className:"routinesForm",children:[Object(N.jsx)("input",{placeholder:"Name the routine",name:"name",value:s.name,onInput:u}),Object(N.jsx)("br",{}),Object(N.jsx)("textarea",{placeholder:"What is the goal of the routine?",name:"goal",value:s.goal,onInput:u}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{className:"submit",type:"submit",children:"Create Routine"})]})})})},L=function(e){var t=e.setRoutines,n=e.name,a=e.goal,s=e.setEditing,i=e.id,o=Object(c.useState)({name:"",goal:"",isPublic:"true"}),u=Object(r.a)(o,2),p=u[0],d=u[1],x=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{s("NotActive")}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){d(Object(S.a)(Object(S.a)({},p),{},Object(I.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(j.a)(l.a.mark((function e(n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,f(i);case 3:return e.prev=3,e.next=6,b.a.patch("".concat(v,"/api/routines/").concat(i),{name:p.name,goal:p.goal,isPublic:!0},{headers:{"Content-type":"application/json",Authorization:"Bearer "+h()}});case 6:return e.sent,e.next=9,O();case 9:r=e.sent,console.log("routineLIST INSIDE EDIT",r),t(r),alert("You edited your routine"),s("NotActive"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}();try{return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("form",{children:["New Name",Object(N.jsx)("br",{}),Object(N.jsx)("input",{placeholder:n,name:"name",value:p.name,onInput:m}),Object(N.jsx)("br",{}),"New Goal",Object(N.jsx)("br",{}),Object(N.jsx)("input",{placeholder:a,name:"goal",value:p.goal,onInput:m}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{onClick:g,children:"Submit Changes"}),Object(N.jsx)("button",{onClick:x,children:"Cancel"})]})})}catch(y){console.error(y)}},U=function(e){var t=e.setRoutines,n=e.activitiesCopy,a=e.setActivityActive,s=e.id,i=Object(c.useState)({activityId:"",count:"",duration:""}),o=Object(r.a)(i,2),u=o[0],p=o[1],d=Object(c.useState)(),h=Object(r.a)(d,2),x=h[0],f=h[1];Object(c.useEffect)((function(){f(n[0])}),[n]);var m=function(e){p(Object(S.a)(Object(S.a)({},u),{},Object(I.a)({},e.target.name,e.target.value)))},g=function(){var e=Object(j.a)(l.a.mark((function e(n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.a.post("".concat(v,"/api/routines/").concat(s,"/activities"),{activityId:x.id,count:u.count,duration:u.duration});case 4:return r=e.sent,console.log(r.data),e.next=8,O();case 8:c=e.sent,t(c),alert("Added activity to your routine!"),w(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();try{a("NoActive")}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){p({name:"",goal:"",isPublic:"true"})};return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("form",{onSubmit:g,children:[Object(N.jsx)("select",{onChange:function(e){e.preventDefault();var t=e.target.value,r=n.find((function(e){return e.id==t}));f(r)},children:n.map((function(e){return Object(N.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{placeholder:"Count",name:"count",value:u.count,onInput:m}),Object(N.jsx)("br",{}),Object(N.jsx)("input",{placeholder:"Duration",name:"duration",value:u.duration,onInput:m}),Object(N.jsx)("br",{}),Object(N.jsx)("button",{className:"submit",type:"submit",children:"Add Activity to Routine"}),Object(N.jsx)("button",{onClick:y,children:"Cancel"})]})})},J=function(){var e=Object(c.useState)(d()),t=Object(r.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)([]),u=Object(r.a)(s,2),l=u[0],j=u[1],p=Object(c.useState)([]),b=Object(r.a)(p,2),h=b[0],v=b[1];return Object(c.useEffect)((function(){O().then((function(e){j(e)})).catch((function(e){throw e}))}),[]),Object(c.useEffect)((function(){g().then((function(e){v(e)})).catch((function(e){throw e}))}),[]),console.log("This is routines in app",l),console.log("This is activities in app",h),console.log("This is user in the app",n),Object(N.jsxs)(i.a,{children:[Object(N.jsxs)("nav",{children:[Object(N.jsx)("div",{id:"title",children:Object(N.jsx)("h1",{children:"FitnessTrackr"})}),Object(N.jsxs)("div",{id:"controls",children:[!n&&Object(N.jsx)(i.b,{to:"/login",children:"Login"}),!n&&Object(N.jsx)(i.b,{to:"/register",children:"Register"}),Object(N.jsx)(i.b,{to:"/routines",children:"Routines"}),Object(N.jsx)(i.b,{to:"/activities",children:"Activities"}),n&&Object(N.jsx)("a",{href:"#",onClick:function(){a(),localStorage.removeItem("currentUser","token"),window.location.assign("/"),alert("Logout successful, come back soon!")},children:"Logout"})]})]}),n?Object(N.jsxs)(o.c,{children:[Object(N.jsx)(o.a,{exact:!0,path:"/",children:Object(N.jsx)(A,{})}),Object(N.jsxs)(o.a,{exact:!0,path:"/routines",children:[Object(N.jsx)(T,{setRoutines:j}),Object(N.jsx)(D,{routines:l,setRoutines:j,setActivities:v,activities:h})]}),Object(N.jsxs)(o.a,{exact:!0,path:"/activities",children:[Object(N.jsx)(F,{setActivities:v}),Object(N.jsx)(E,{activities:h})]})]}):Object(N.jsxs)(o.c,{children:[Object(N.jsx)(o.a,{exact:!0,path:"/login",children:Object(N.jsx)(R,{setUser:a})}),Object(N.jsx)(o.a,{exact:!0,path:"/register",children:Object(N.jsx)(C,{setUser:a})}),Object(N.jsx)(o.a,{exact:!0,path:"/routines",children:Object(N.jsx)(D,{routines:l,activities:h})}),Object(N.jsx)(o.a,{exact:!0,path:"/activities",children:Object(N.jsx)(E,{activities:h})})]})]})};s.a.render(Object(N.jsx)(J,{}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.27119beb.chunk.js.map